name: main_workflow

on: 
  push:
    branches:
      -  nodejs_linter_jo
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *'

jobs:
   wget:
    runs-on: ubuntu-latest
    steps:
      uses: actions/checkout@v2
      
      - name: donwload and update link
        uses: actions/checkout@v2
        run: bash ./downloadFile.sh
        shell: bash
      
      - name: Update Github repo
        run: |
          git config user.name jorbencas
          git config user.email jorbencas@gmail.com
          git add index.html
          git diff --quiet && git diff --staged --quiet || git commit -m "[bot] Update link to download file"
          git push origin main 
      
      - name: Deploy to foo-bar.surge.sh
        uses: dswistowski/surge-sh-action@v1
        with:
          domain: 'jorbencasdownloaderdocument.surge.sh'
          project: '.'
          login: ${{ secrets.surge_login }}
          token: ${{ secrets.surge_token }}